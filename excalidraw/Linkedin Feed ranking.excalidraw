{"type":"excalidraw","version":2,"source":"https://app.excalidraw.com","metadata":{"id":"1ODbvgmREY7","workspace":"6lsqOkFWqjK","name":"Linkedin Feed ranking","created":"2025-10-30T05:29:20.382Z","updated":"2025-10-30T05:47:31.886Z","collection":null,"creator":"Alx6QpYT9Vj","updater":"Alx6QpYT9Vj","isPrivate":true,"pinned":false},"elements":[{"id":"fGiiEf52FSl0QyOnb9YLE","type":"text","x":1899.4582034995087,"y":-165.25440049308168,"width":1006.9870371997088,"height":3825,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a0","roundness":null,"seed":492821788,"version":216,"versionNonce":1632749348,"isDeleted":false,"boundElements":[],"updated":1761803244200,"link":null,"locked":false,"text":"LinkedIn — Feed / Content Ranking (posts, articles, jobs, ads-aware but organic-focused)\n\nCQ\n\nSurfaces: homepage feed + jobs tab recirculation + notifications/email snippets? global, multi-lingual?\n\nPrimary KPI: meaningful engagement (click-through, dwell≥x sec, reactions/comments/shares) → quality-\nweighted; secondaries: creator growth, session depth; guardrails: hide/report rate,\nmisinformation/abuse, latency.\n\nContent scopes: connections, follows, groups, re-shares, job cards, creator posts, company pages;\ndedup/near-dup?\n\nConstraints: eligibility (language, geo/legal), creator pacing, freshness window, ads separation; latency\nbudgets (retrieval ≤40ms, rank ≤80ms, rerank ≤30ms).\n\nPersonalization: member graph + interests + in-session intent; explainability?\n\nHigh level\n\n3-stage pipeline: Retrieval (candidate gen, high recall) → Heavy Ranker (precision, multi-objective) →\nReranker (freshness/diversity/fairness/novelty/business rules).\n\nMulti-objective score (calibrated):\n\n\nStrict quality filters before ranking: spam/safety, policy, creator quotas, collapse near-dups, hide seen.\n\nData prep / governance\n\nEntities: member (profile, skills, seniority, locale), content (post/article/job/story: text+media+lang,\nauthor, page/company), graph (connections, follows, groups), interactions (impress, click, dwell, react\ntypes, comment, share, hide/report), session (queries, searches), creator metrics (authenticity,\nhistory).\n\nTime-aware snapshots; impression logging with position/surface propensities for debiasing; feature\nstore with static (daily) + streaming (mins) TTL; train/serve parity.\n\nFeature engineering\n\nMember: title/industry embeddings, seniority, interests, follow set, activity rates, session intent\n(recent searches, entities), geo/timezone, device.\n\nContent: text LM embeddings (e.g., MiniLM), media (image/video) embeddings, language, topics/entities,\nlength, age (freshness), creator/page features (quality score, posting rate, network reach).\n\nGraph/social: connection depth (1/2), mutuals engaged, social proof signals (peers\nreacted/commented), group overlap, creator–member affinity.\n\nContext: DOW/TOD, session recency, position, network churn, recency decay.\n\nQuality/safety: spam/toxicity/NSFW scores, misinformation flags, report/hide priors.\n\nCross: member×content topic cosine, member×creator past engagement, entity overlap, language match,\ndwell-adjusted CTR.\n\nJobs as content: skill/title match, commute/remote fit; rate-limit to avoid crowding the feed.\n\nRetrieval (candidate generation)\n\nGraph recall: recent posts from connections/follows/groups; creator pacing limits.\n\nSemantic recall: two-tower (member intent ↔ content) over text/media embeddings; ANN\n(ScaNN/FAISS).\n\nFresh recall: newest content from close connections + trending in cohorts.\n\nDiversity buckets: creators, formats (text/video/article/job), topics, recency strata.\n\nOutput K≈1–3k.\n\nHeavy ranker\n\nBackbone: DNN with DCNv2 crosses; MMOE with heads {dwell, click, reaction, comment, share, report}.\n\nSequence encoder: Transformer over member’s recent feed interactions (items & actions) → short-term\nintent embedding.\n\nCross-encoder (light): attention between member & content text to refine semantic alignment\n(budgeted for top-N).\n\nCalibration: per-region/surface isotonic/Platt; maintain calibrated probabilities for policy thresholds.\n\nLoss: weighted BCE per head (+ focal on sparse comment/share), optional listwise/NDCG surrogate\nfor top-k shaping.\n\nReranker / policy layer\n\nFreshness boost; creator fairness (exposure quotas, diminishing returns), diversity\n(topic/creator/company/format caps), novelty vs repetition; popularity penalty; down-rank low-quality\nsignals; attach explanations (“Because 3 peers engaged” / “Matches your interests in X”).\n\nTraining\n\nLabels: dwell≥x sec, reaction types, comment, share, report; horizon within 24–48h of impression.\n\nNegatives: exposed but no engage (hard); semi-hard (short dwell, quick bounce).\n\nDebias: IPS/DR using impression propensities (position/surface); include position as feature.\n\nRegularization: dropout/L2; gradient balancing (avoid click dominating dwell/comment).\n\nContinual learning: daily refresh + drift triggers; warm-start text/media encoders.\n\nEvaluation\n\nOffline: NDCG@k (quality-weighted), PR-AUC/AUC per head, calibration (Brier/ECE), coverage@k, slate\ndiversity metrics, creator exposure entropy.\n\nOnline (A/B): dwell↑, meaningful reactions/comments↑, shares↑, session time↑, creator growth↑;\nguardrails: report/hide↓, misinformation flags↓, ad separation intact, p99 latency.\n\nServing\n\nBudget split: retrieval 30–40ms, rank 60–80ms, rerank 20–30ms.\n\nFeature hydration: cache member/content static; stream freshness/quality; compute on-read social-\nproof deltas.\n\nCaching: precompute member→topN mini-slates (short TTL), creator pacing counters; dedup/near-dup\ncollapse; suppress already-seen within session.\n\nBias / fairness / exploration\n\nPopularity bias controls (penalty, exposure caps); cohort fairness monitoring\n(region/industry/language); equal-position logging buckets.\n\nContextual bandits in reranker (ε/TS) to discover new creators/topics; cap exploration rate; safety-\naware.\n\nCold start\n\nNew member: bootstrap interests via profile (title/skills/industry), follows graph, quick-prefs; rely on\nsemantic/fresh recall + cohort priors.\n\nNew creator/content: freshness boost with guardrails; creator quality prior via page/company trust\nsignals; semantic match to likely audiences.\n\nSafety / quality\n\nPre-rank abuse filters (NSFW/spam/toxicity/misinfo) → hard blocks; near-real-time takedown &\nfeedback loop from reports.\n\nDownstream rate limits for low-trust creators; appeals workflow; human review buffers for borderline\ncontent.\n\nOps / deployment\n\nShadow vs baseline, canary 1–5%, sequential testing; long-tail holdouts for creator impact; blue/green\nmodels, schema guards, kill-switches.\n\nMonitoring: PSI/KS on core features, score drift, recall coverage, tail latency, feature staleness,\ncreator exposure distributions.","fontSize":20,"fontFamily":5,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"LinkedIn — Feed / Content Ranking (posts, articles, jobs, ads-aware but organic-focused)\n\nCQ\n\nSurfaces: homepage feed + jobs tab recirculation + notifications/email snippets? global, multi-lingual?\n\nPrimary KPI: meaningful engagement (click-through, dwell≥x sec, reactions/comments/shares) → quality-weighted; secondaries: creator growth, session depth; guardrails: hide/report rate, misinformation/abuse, latency.\n\nContent scopes: connections, follows, groups, re-shares, job cards, creator posts, company pages; dedup/near-dup?\n\nConstraints: eligibility (language, geo/legal), creator pacing, freshness window, ads separation; latency budgets (retrieval ≤40ms, rank ≤80ms, rerank ≤30ms).\n\nPersonalization: member graph + interests + in-session intent; explainability?\n\nHigh level\n\n3-stage pipeline: Retrieval (candidate gen, high recall) → Heavy Ranker (precision, multi-objective) → Reranker (freshness/diversity/fairness/novelty/business rules).\n\nMulti-objective score (calibrated):\n\n\nStrict quality filters before ranking: spam/safety, policy, creator quotas, collapse near-dups, hide seen.\n\nData prep / governance\n\nEntities: member (profile, skills, seniority, locale), content (post/article/job/story: text+media+lang, author, page/company), graph (connections, follows, groups), interactions (impress, click, dwell, react types, comment, share, hide/report), session (queries, searches), creator metrics (authenticity, history).\n\nTime-aware snapshots; impression logging with position/surface propensities for debiasing; feature store with static (daily) + streaming (mins) TTL; train/serve parity.\n\nFeature engineering\n\nMember: title/industry embeddings, seniority, interests, follow set, activity rates, session intent (recent searches, entities), geo/timezone, device.\n\nContent: text LM embeddings (e.g., MiniLM), media (image/video) embeddings, language, topics/entities, length, age (freshness), creator/page features (quality score, posting rate, network reach).\n\nGraph/social: connection depth (1/2), mutuals engaged, social proof signals (peers reacted/commented), group overlap, creator–member affinity.\n\nContext: DOW/TOD, session recency, position, network churn, recency decay.\n\nQuality/safety: spam/toxicity/NSFW scores, misinformation flags, report/hide priors.\n\nCross: member×content topic cosine, member×creator past engagement, entity overlap, language match, dwell-adjusted CTR.\n\nJobs as content: skill/title match, commute/remote fit; rate-limit to avoid crowding the feed.\n\nRetrieval (candidate generation)\n\nGraph recall: recent posts from connections/follows/groups; creator pacing limits.\n\nSemantic recall: two-tower (member intent ↔ content) over text/media embeddings; ANN (ScaNN/FAISS).\n\nFresh recall: newest content from close connections + trending in cohorts.\n\nDiversity buckets: creators, formats (text/video/article/job), topics, recency strata.\n\nOutput K≈1–3k.\n\nHeavy ranker\n\nBackbone: DNN with DCNv2 crosses; MMOE with heads {dwell, click, reaction, comment, share, report}.\n\nSequence encoder: Transformer over member’s recent feed interactions (items & actions) → short-term intent embedding.\n\nCross-encoder (light): attention between member & content text to refine semantic alignment (budgeted for top-N).\n\nCalibration: per-region/surface isotonic/Platt; maintain calibrated probabilities for policy thresholds.\n\nLoss: weighted BCE per head (+ focal on sparse comment/share), optional listwise/NDCG surrogate for top-k shaping.\n\nReranker / policy layer\n\nFreshness boost; creator fairness (exposure quotas, diminishing returns), diversity (topic/creator/company/format caps), novelty vs repetition; popularity penalty; down-rank low-quality signals; attach explanations (“Because 3 peers engaged” / “Matches your interests in X”).\n\nTraining\n\nLabels: dwell≥x sec, reaction types, comment, share, report; horizon within 24–48h of impression.\n\nNegatives: exposed but no engage (hard); semi-hard (short dwell, quick bounce).\n\nDebias: IPS/DR using impression propensities (position/surface); include position as feature.\n\nRegularization: dropout/L2; gradient balancing (avoid click dominating dwell/comment).\n\nContinual learning: daily refresh + drift triggers; warm-start text/media encoders.\n\nEvaluation\n\nOffline: NDCG@k (quality-weighted), PR-AUC/AUC per head, calibration (Brier/ECE), coverage@k, slate diversity metrics, creator exposure entropy.\n\nOnline (A/B): dwell↑, meaningful reactions/comments↑, shares↑, session time↑, creator growth↑; guardrails: report/hide↓, misinformation flags↓, ad separation intact, p99 latency.\n\nServing\n\nBudget split: retrieval 30–40ms, rank 60–80ms, rerank 20–30ms.\n\nFeature hydration: cache member/content static; stream freshness/quality; compute on-read social-proof deltas.\n\nCaching: precompute member→topN mini-slates (short TTL), creator pacing counters; dedup/near-dup collapse; suppress already-seen within session.\n\nBias / fairness / exploration\n\nPopularity bias controls (penalty, exposure caps); cohort fairness monitoring (region/industry/language); equal-position logging buckets.\n\nContextual bandits in reranker (ε/TS) to discover new creators/topics; cap exploration rate; safety-aware.\n\nCold start\n\nNew member: bootstrap interests via profile (title/skills/industry), follows graph, quick-prefs; rely on semantic/fresh recall + cohort priors.\n\nNew creator/content: freshness boost with guardrails; creator quality prior via page/company trust signals; semantic match to likely audiences.\n\nSafety / quality\n\nPre-rank abuse filters (NSFW/spam/toxicity/misinfo) → hard blocks; near-real-time takedown & feedback loop from reports.\n\nDownstream rate limits for low-trust creators; appeals workflow; human review buffers for borderline content.\n\nOps / deployment\n\nShadow vs baseline, canary 1–5%, sequential testing; long-tail holdouts for creator impact; blue/green models, schema guards, kill-switches.\n\nMonitoring: PSI/KS on core features, score drift, recall coverage, tail latency, feature staleness, creator exposure distributions.","autoResize":false,"lineHeight":1.25}],"appState":{"viewBackgroundColor":"#ffffff","lockedMultiSelections":{}},"files":{}}