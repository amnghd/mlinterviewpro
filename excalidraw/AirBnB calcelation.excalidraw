{"type":"excalidraw","version":2,"source":"https://app.excalidraw.com","metadata":{"id":"9EwkR5yT1MY","workspace":"6lsqOkFWqjK","name":"AirBnB calcelation","created":"2025-10-28T19:38:10.886Z","updated":"2025-10-28T21:05:07.632Z","collection":null,"creator":"Alx6QpYT9Vj","updater":"Alx6QpYT9Vj","isPrivate":true,"pinned":false},"elements":[{"id":"4cL2wCSgyZ8GW8B2q1K6h","type":"text","x":131.75,"y":302,"width":1275.59912109375,"height":3625,"angle":0,"strokeColor":"#1e1e1e","backgroundColor":"transparent","fillStyle":"solid","strokeWidth":2,"strokeStyle":"solid","roughness":1,"opacity":100,"groupIds":[],"frameId":null,"index":"a0","roundness":null,"seed":1136239908,"version":5344,"versionNonce":1500363292,"isDeleted":false,"boundElements":[],"updated":1761685499855,"link":null,"locked":false,"text":"Propose a solution to predict guest cancellations on Airbnb’s platform.\n\n\nCQ: \n- Guest initiated cancelation?\n- Predicting cancel within time window (1d, 3d, 7d, 14d)\n- Latency budget?  batch refresh?\n- Scale: DAU, QPS, regional slice, multi lingual\n- Interventions (reminder, pre-check-in confirm, deposit change, wait list ping)\n- KPI (cancel rate drop, renveue,  guardrail on complaint rate,  host review, rebooking rate)\n\n\nHigh level:\n- predict probablity of cancel | booking, guest, host, listing, context, t=> across time\n- two stage: \n-- T0 booking risk: immeditately after reservation (quick and cheap)\n-- Offline conginual risk updates (streming), fron host/guest interactions, payment event, travel signals\n- Actions caliberated by risk: \n--- soft nudges\n--- confirm intent\n--- alternative offers\n--- deposit / penalty reminder\n\n\n\nData construction\n- labeling:\n-- positive: guest canceled before check in\n-- negative: completed stays \n-- maybe multi horizon modeling: (time to event) -> user canceled in differnt horizon\n\n- sampling:\n-- strong class imbalance / class weighted/ focal loss\n-- time stratified split to avoid leakage\n\n\n\nFeature engineering:\n- For T0 model only features at booking time\n-\n\n- guest:\n-- account age, vefication statgus, historical cancel rate, payment failure, messaging responsiveness, device changes\n-- prior disputes, trup purpose (from messages)\n\n- host / listing:\n-- host cancel rate, response latency, SLA adherence, listying type, price cleaning fee, price cateogory to similar listings\n-- minimum nights, lead time norms,\n-- historical overbooking\n\n- booking / context\n-- lead time, stay length, party size, arrival weekday, season, local event density, price volitality, discount depth, priort page churn\n-- prior page churn\n\n- payment:\n-- installment plan, card BIN risk bucket, retry count, payment method change\n\n- messaging:\n-- guest intent signals (sentiment - uncertainlty, not sure, might, etc)\n-- conversation cadence gap, refund keywords, multilingual (bert), \n\n- behavioral\n-- recent search filter vs booking divergence, frequent itenerary update\n\n- geo\n-- flight disrputons: airport delay indice, weather alert, strikes, major events\n\n- grph \n-- guest cluster (cluster of booking pattersn), listing peer stablity, \n\n-- feature store (static, ids, policites), duna,ics (message counts, retries), strict train/serve parity\n\n\n\n\n\nModeling architecture\n\n-- baseline: Xgboost, lightGBM for tabluar, caliberated problity (fast, string with hetergenous feautres)\n-- deep (dnn with embeddings for high cardinality, dense features, optimal DCNV2 for feature cross)\n-- parallel logits for 24h, 3d, 7d, 14d cancelation, shared trunk ++ MMOE if heads compete\n-- sequence encoder : leight weight transformer over recent guest queries, action, message\n-- caliberation: per region isotonic, platt, on validation bucket, thresholdable risk tiers\n\n\nTraining:\n- weighted BCE per horizon, focal loss to focus hard on hard positive\n- regularization: drop out, L2, early stopping, \n- class imbalance: cost sensitive loss, dont over sample poistives\n- continueal learning: daily incremental retrain, warm start with low LR: gaurd agains catastrophic forgetting\n\n\nEvaulation:\n- offline:\n-- PR AUC, ROC AUC, caliberation score, \n-- caliberation plots\n\n- online A/B\ncancelation rate drop, revenue increase, gaurdrail on complaint rate\n\n\n\nServing:\n- T0:\n-- computed at booking\n- streaming async (event driven) => compute risk on triggers, message, payment, itenerary, fight alert\n- action policy:\n-- low no action\n-- medium: soft nudge (reminder of policy, travel docmendation)\n-- hgih: confirm intent, flexible alternative, wait list warm start \n-- critical: require re-auth of payment, partial deposit lock, practive back up gues t matching\n\nDeployment:\n- shadow alongside rules\n- canary on 1 DC\n- full A/B\n- dstill deep into a light ranker for spikes, quantize embedding\n\n\n\nMonitoring:\n- model auc, caliberation, score distrbution\n- business: cancel rate, revenu saved, host nps,\n- system latency, qps, featyre hydration\n- data quality splikes, cardinality explotion, message parsing \n\n\nBiases:\n-- audit performance across geos, languages, new and appeal guests\n-- avoid penlizing guests from dusruped regions, (weather, strikes\n- privacy minimize PII, on devlice features hwere possible, GDPR/DMA complaintrs\n\n\nCold start:\n-- new guest: reply on booking context + payment friction, + message\n-- new listing: user listing priors from neighbor hood, peers\n-- new market: hierarchical pooling: (country->city)\n\nExtension: \n- Uplift modeling to select guests who respond to nudges\n- causal features\n\n\n\n","fontSize":20,"fontFamily":5,"textAlign":"left","verticalAlign":"top","containerId":null,"originalText":"Propose a solution to predict guest cancellations on Airbnb’s platform.\n\n\nCQ: \n- Guest initiated cancelation?\n- Predicting cancel within time window (1d, 3d, 7d, 14d)\n- Latency budget?  batch refresh?\n- Scale: DAU, QPS, regional slice, multi lingual\n- Interventions (reminder, pre-check-in confirm, deposit change, wait list ping)\n- KPI (cancel rate drop, renveue,  guardrail on complaint rate,  host review, rebooking rate)\n\n\nHigh level:\n- predict probablity of cancel | booking, guest, host, listing, context, t=> across time\n- two stage: \n-- T0 booking risk: immeditately after reservation (quick and cheap)\n-- Offline conginual risk updates (streming), fron host/guest interactions, payment event, travel signals\n- Actions caliberated by risk: \n--- soft nudges\n--- confirm intent\n--- alternative offers\n--- deposit / penalty reminder\n\n\n\nData construction\n- labeling:\n-- positive: guest canceled before check in\n-- negative: completed stays \n-- maybe multi horizon modeling: (time to event) -> user canceled in differnt horizon\n\n- sampling:\n-- strong class imbalance / class weighted/ focal loss\n-- time stratified split to avoid leakage\n\n\n\nFeature engineering:\n- For T0 model only features at booking time\n-\n\n- guest:\n-- account age, vefication statgus, historical cancel rate, payment failure, messaging responsiveness, device changes\n-- prior disputes, trup purpose (from messages)\n\n- host / listing:\n-- host cancel rate, response latency, SLA adherence, listying type, price cleaning fee, price cateogory to similar listings\n-- minimum nights, lead time norms,\n-- historical overbooking\n\n- booking / context\n-- lead time, stay length, party size, arrival weekday, season, local event density, price volitality, discount depth, priort page churn\n-- prior page churn\n\n- payment:\n-- installment plan, card BIN risk bucket, retry count, payment method change\n\n- messaging:\n-- guest intent signals (sentiment - uncertainlty, not sure, might, etc)\n-- conversation cadence gap, refund keywords, multilingual (bert), \n\n- behavioral\n-- recent search filter vs booking divergence, frequent itenerary update\n\n- geo\n-- flight disrputons: airport delay indice, weather alert, strikes, major events\n\n- grph \n-- guest cluster (cluster of booking pattersn), listing peer stablity, \n\n-- feature store (static, ids, policites), duna,ics (message counts, retries), strict train/serve parity\n\n\n\n\n\nModeling architecture\n\n-- baseline: Xgboost, lightGBM for tabluar, caliberated problity (fast, string with hetergenous feautres)\n-- deep (dnn with embeddings for high cardinality, dense features, optimal DCNV2 for feature cross)\n-- parallel logits for 24h, 3d, 7d, 14d cancelation, shared trunk ++ MMOE if heads compete\n-- sequence encoder : leight weight transformer over recent guest queries, action, message\n-- caliberation: per region isotonic, platt, on validation bucket, thresholdable risk tiers\n\n\nTraining:\n- weighted BCE per horizon, focal loss to focus hard on hard positive\n- regularization: drop out, L2, early stopping, \n- class imbalance: cost sensitive loss, dont over sample poistives\n- continueal learning: daily incremental retrain, warm start with low LR: gaurd agains catastrophic forgetting\n\n\nEvaulation:\n- offline:\n-- PR AUC, ROC AUC, caliberation score, \n-- caliberation plots\n\n- online A/B\ncancelation rate drop, revenue increase, gaurdrail on complaint rate\n\n\n\nServing:\n- T0:\n-- computed at booking\n- streaming async (event driven) => compute risk on triggers, message, payment, itenerary, fight alert\n- action policy:\n-- low no action\n-- medium: soft nudge (reminder of policy, travel docmendation)\n-- hgih: confirm intent, flexible alternative, wait list warm start \n-- critical: require re-auth of payment, partial deposit lock, practive back up gues t matching\n\nDeployment:\n- shadow alongside rules\n- canary on 1 DC\n- full A/B\n- dstill deep into a light ranker for spikes, quantize embedding\n\n\n\nMonitoring:\n- model auc, caliberation, score distrbution\n- business: cancel rate, revenu saved, host nps,\n- system latency, qps, featyre hydration\n- data quality splikes, cardinality explotion, message parsing \n\n\nBiases:\n-- audit performance across geos, languages, new and appeal guests\n-- avoid penlizing guests from dusruped regions, (weather, strikes\n- privacy minimize PII, on devlice features hwere possible, GDPR/DMA complaintrs\n\n\nCold start:\n-- new guest: reply on booking context + payment friction, + message\n-- new listing: user listing priors from neighbor hood, peers\n-- new market: hierarchical pooling: (country->city)\n\nExtension: \n- Uplift modeling to select guests who respond to nudges\n- causal features\n\n\n\n","autoResize":true,"lineHeight":1.25}],"appState":{"viewBackgroundColor":"#ffffff","lockedMultiSelections":{}},"files":{}}