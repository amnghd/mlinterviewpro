<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML System Design - MLInterviewPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .case-card:hover { transform: translateY(-3px); }
        .premium-blur { filter: blur(4px); pointer-events: none; }
        .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .collapsible-content.open { max-height: 5000px; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="text-xl sm:text-2xl font-bold text-purple-600">
                    <i class="fas fa-brain mr-2"></i><span class="hidden sm:inline">MLInterviewPro</span><span class="sm:hidden">MLIP</span>
                </a>
                <div class="hidden lg:flex space-x-6">
                    <a href="leetcode.html" class="text-gray-700 hover:text-purple-600 font-medium">LeetCode</a>
                    <a href="ml-system-design.html" class="text-purple-600 font-bold">ML System Design</a>
                    <a href="ml-coding.html" class="text-gray-700 hover:text-purple-600 font-medium">ML Coding</a>
                    <a href="behavioral.html" class="text-gray-700 hover:text-purple-600 font-medium">Behavioral</a>
                    <a href="cheatsheet.html" class="text-gray-700 hover:text-purple-600 font-medium">Cheatsheet</a>
                    <a href="resources.html" class="text-gray-700 hover:text-purple-600 font-medium">Resources</a>
                    <a href="about.html" class="text-gray-700 hover:text-purple-600 font-medium">About</a>
                </div>
                <div class="flex items-center gap-2">
                    <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank"
                       class="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-3 sm:px-4 py-2 rounded-full font-semibold hover:shadow-lg transition text-sm sm:text-base">
                        <i class="fas fa-user-tie sm:mr-2"></i><span class="hidden sm:inline">Book Mentorship</span>
                    </a>
                    <button onclick="toggleMobileMenu()" class="lg:hidden p-2 rounded-lg hover:bg-gray-100 min-w-[44px] min-h-[44px] flex items-center justify-center">
                        <i class="fas fa-bars text-xl text-gray-700" id="menu-icon"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="lg:hidden hidden bg-white border-t">
            <div class="px-4 py-3 space-y-2">
                <a href="leetcode.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">LeetCode</a>
                <a href="ml-system-design.html" class="block py-3 px-4 bg-purple-50 text-purple-600 rounded-lg font-medium">ML System Design</a>
                <a href="ml-coding.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">ML Coding</a>
                <a href="behavioral.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">Behavioral</a>
                <a href="cheatsheet.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">Cheatsheet</a>
                <a href="resources.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">Resources</a>
                <a href="about.html" class="block py-3 px-4 text-gray-700 hover:bg-purple-50 hover:text-purple-600 rounded-lg font-medium">About</a>
            </div>
        </div>
    </nav>
    <script>
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            const icon = document.getElementById('menu-icon');
            menu.classList.toggle('hidden');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        }
    </script>

    <!-- Header with Stats -->
    <section class="gradient-bg text-white py-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white/10 backdrop-blur rounded-xl p-3 text-center">
                    <div class="text-2xl font-bold">+300%</div>
                    <div class="text-xs opacity-80">AI Job Growth (LinkedIn)</div>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-3 text-center">
                    <div class="text-2xl font-bold">88%</div>
                    <div class="text-xs opacity-80">Companies Using AI (McKinsey)</div>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-3 text-center">
                    <div class="text-2xl font-bold">$185K+</div>
                    <div class="text-xs opacity-80">Median ML Salary (Forbes)</div>
                </div>
                <div class="bg-white/10 backdrop-blur rounded-xl p-3 text-center">
                    <div class="text-2xl font-bold">+53%</div>
                    <div class="text-xs opacity-80">Salary Increase in 15mo</div>
                </div>
            </div>
            <h1 class="text-4xl font-bold mb-4"><i class="fas fa-project-diagram mr-3"></i>ML System Design Cases</h1>
            <p class="text-xl opacity-90">22 comprehensive case studies with full solutions and diagrams</p>
        </div>
    </section>

    <!-- Topics Overview -->
    <section class="py-8 bg-white shadow">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="p-4 rounded-lg bg-green-50">
                    <div class="text-2xl font-bold text-green-600">8</div>
                    <div class="text-sm text-gray-600">RecSys Cases</div>
                </div>
                <div class="p-4 rounded-lg bg-blue-50">
                    <div class="text-2xl font-bold text-blue-600">6</div>
                    <div class="text-sm text-gray-600">Search/Ranking</div>
                </div>
                <div class="p-4 rounded-lg bg-red-50">
                    <div class="text-2xl font-bold text-red-600">4</div>
                    <div class="text-sm text-gray-600">Content Mod</div>
                </div>
                <div class="p-4 rounded-lg bg-yellow-50">
                    <div class="text-2xl font-bold text-yellow-600">4</div>
                    <div class="text-sm text-gray-600">Ads/Pricing</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Free Case - YouTube Only -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-unlock text-green-500 mr-3"></i>Free Example - Full System Design Interview
            </h2>

            <!-- Case 1: YouTube Video Recommendation (FULL) -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-green-500">
                <div class="p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">RecSys</span>
                            <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium ml-2">Free Full Example</span>
                            <h3 class="text-2xl font-bold mt-2">YouTube Video Recommendation System</h3>
                            <p class="text-gray-600">Design a recommendation system for YouTube's homepage feed</p>
                        </div>
                        <span class="text-sm text-gray-500">YouTube/Google</span>
                    </div>

                    <button onclick="toggleContent('yt-rec')" class="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition mb-4">
                        <i class="fas fa-eye mr-2"></i>View Full Interview Solution
                    </button>

                    <div id="yt-rec" class="collapsible-content">
                        <!-- Clarifying Questions -->
                        <div class="bg-blue-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-blue-800 mb-3"><i class="fas fa-question-circle mr-2"></i>Clarifying Questions</h4>
                            <ul class="text-sm text-gray-700 space-y-2">
                                <li><strong>Catalog size?</strong> 1B videos</li>
                                <li><strong>Multi-lingual?</strong> Yes, global audience</li>
                                <li><strong>Context?</strong> Homepage feed (not video page)</li>
                                <li><strong>Latency budget?</strong> 200ms</li>
                                <li><strong>QPS?</strong> 50k QPS</li>
                                <li><strong>KPI?</strong> Video completion rate, guardrail on churn rate</li>
                                <li><strong>User interactions available?</strong> Like, comment, watch time, click, share</li>
                            </ul>
                        </div>

                        <!-- High Level Design -->
                        <div class="bg-purple-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-purple-800 mb-3"><i class="fas fa-sitemap mr-2"></i>High-Level Design</h4>
                            <ul class="text-sm text-gray-700 space-y-2">
                                <li><strong>Objective:</strong> Maximize user engagement on video catalog</li>
                                <li><strong>KPI:</strong> Watch time (dwell time), weighted sum of engagement signals</li>
                                <li><strong>Architecture:</strong> Candidate Generator + Heavy Ranker + Reranker</li>
                                <li><strong>Guardrails:</strong> Churn rate, report rate, negative feedback</li>
                            </ul>
                        </div>

                        <!-- Data Engineering -->
                        <div class="bg-green-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-green-800 mb-3"><i class="fas fa-database mr-2"></i>Data Engineering & Labels</h4>
                            <div class="text-sm text-gray-700">
                                <p class="mb-2"><strong>Label Construction:</strong></p>
                                <ul class="list-disc ml-4 space-y-1">
                                    <li>Weighted sum: w1 x like + w2 x comment sentiment + w3 x share + w4 x watch time + w5 x dwell time</li>
                                    <li>Negative samples: In-session impressed but not engaged (per task)</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Feature Engineering -->
                        <div class="bg-orange-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-orange-800 mb-3"><i class="fas fa-cogs mr-2"></i>Feature Engineering</h4>
                            <div class="grid md:grid-cols-3 gap-4 text-sm text-gray-700">
                                <div>
                                    <p class="font-semibold mb-2">User Features:</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>User age, demographics</li>
                                        <li>User embeddings (sequence model)</li>
                                        <li>Search history embeddings (aggregated)</li>
                                        <li>Video genre clusters</li>
                                        <li>Historical engagement patterns</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold mb-2">Video Features:</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>Video ID embedding</li>
                                        <li>Content: Frame extraction, 3D transformers</li>
                                        <li>Transcription: BERT embeddings</li>
                                        <li>Genre (one-hot)</li>
                                        <li>Likes/impressions (bucketized, log-transformed)</li>
                                        <li>Channel ID embedding, subscriber count</li>
                                        <li>Video age (freshness)</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold mb-2">Context Features:</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>Time of day, day of week</li>
                                        <li>Device type, network type</li>
                                        <li>Session context</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Modeling Architecture -->
                        <div class="bg-pink-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-pink-800 mb-3"><i class="fas fa-brain mr-2"></i>Modeling Architecture</h4>
                            <div class="text-sm text-gray-700 space-y-3">
                                <div>
                                    <p class="font-semibold">Candidate Generator:</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>Collaborative filtering (fast, simple, WALS for continual training)</li>
                                        <li>Two-tower model (handles cold start, requires ANN serving)</li>
                                        <li>Content-based filtering for cold start items</li>
                                        <li>Goal: Improve recall within latency budget</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold">Heavy Ranker (Single Tower):</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>Learning to rank (pointwise for simplicity, pairwise/listwise for NDCG)</li>
                                        <li>Feature crosses: DCN V2 for efficient deep crosses</li>
                                        <li>MMOE for multi-task learning (avoid task competition)</li>
                                        <li>Goal: Improve precision</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold">Reranker:</p>
                                    <ul class="list-disc ml-4 space-y-1">
                                        <li>Business logic enforcement</li>
                                        <li>Freshness boost for new content</li>
                                        <li>Diversity constraints (near-duplicate removal)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Training -->
                        <div class="bg-yellow-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-yellow-800 mb-3"><i class="fas fa-graduation-cap mr-2"></i>Model Training</h4>
                            <ul class="text-sm text-gray-700 space-y-1">
                                <li><strong>Class Imbalance:</strong> Downsample majority class</li>
                                <li><strong>Focal Loss:</strong> Avoid loss domination by easy examples</li>
                                <li><strong>Gradient Blending:</strong> Balance multi-task learning</li>
                                <li><strong>Calibration:</strong> Not strictly needed for ranking</li>
                            </ul>
                        </div>

                        <!-- Evaluation -->
                        <div class="bg-indigo-50 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-indigo-800 mb-3"><i class="fas fa-chart-line mr-2"></i>Evaluation Metrics</h4>
                            <div class="grid md:grid-cols-2 gap-4 text-sm text-gray-700">
                                <div>
                                    <p class="font-semibold">Offline:</p>
                                    <ul class="list-disc ml-4">
                                        <li>Per-head AUC, weighted loss</li>
                                        <li>MAP (rank of results)</li>
                                        <li>Diversity (aggregated cosine similarity)</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="font-semibold">Online:</p>
                                    <ul class="list-disc ml-4">
                                        <li>Weighted engagement score</li>
                                        <li>CTR, dwell time, LTV</li>
                                        <li>Guardrails: reports, dislike rate</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Serving & Deployment -->
                        <div class="bg-gray-100 rounded-lg p-4 mb-4">
                            <h4 class="font-bold text-gray-800 mb-3"><i class="fas fa-server mr-2"></i>Serving & Deployment</h4>
                            <div class="text-sm text-gray-700 space-y-2">
                                <p><strong>Efficiency:</strong> Distill heavy ranker to light ranker, embedding quantization, ANN, caching</p>
                                <p><strong>Freshness:</strong> Continual learning with learning rate decay (avoid catastrophic forgetting)</p>
                                <p><strong>Deployment:</strong> Shadow testing, canary, A/B testing, holdback, multi-arm bandit</p>
                            </div>
                        </div>

                        <!-- Advanced Topics -->
                        <div class="bg-red-50 rounded-lg p-4">
                            <h4 class="font-bold text-red-800 mb-3"><i class="fas fa-rocket mr-2"></i>Advanced Topics</h4>
                            <div class="text-sm text-gray-700 space-y-2">
                                <p><strong>Bias Handling:</strong></p>
                                <ul class="list-disc ml-4">
                                    <li>Popularity bias: Apply penalty in reranker</li>
                                    <li>Position bias: Add position as feature, serve same position at inference</li>
                                    <li>Serving bias: Epsilon-greedy exploration</li>
                                </ul>
                                <p class="mt-2"><strong>Cold Start:</strong></p>
                                <ul class="list-disc ml-4">
                                    <li>Two-tower and ranker use context features</li>
                                    <li>Dropout ID features during training</li>
                                    <li>Fallback model for new users (trendy, popular)</li>
                                    <li>Content-based filtering for new items</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Premium Cases Section - ALL LOCKED -->
    <section class="py-12 bg-gradient-to-br from-purple-50 to-pink-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-lock text-purple-500 mr-3"></i>Premium Cases (21 more with full solutions)
            </h2>

            <div class="relative">
                <div class="grid md:grid-cols-3 gap-4 premium-blur">
                    <!-- RecSys -->
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">People You May Know (PYMK)</h3>
                        <p class="text-sm text-gray-600">GNN edge prediction, LightGCN, friend-of-friend...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">Pinterest Feed Ranking</h3>
                        <p class="text-sm text-gray-600">MMOE, DCN V2, multi-task learning...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">LinkedIn Job Recommendation</h3>
                        <p class="text-sm text-gray-600">Skill matching, graph neural networks...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">Event Recommendation</h3>
                        <p class="text-sm text-gray-600">Location-based, time-sensitive features...</p>
                    </div>
                    <!-- Search -->
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Search</span>
                        <h3 class="font-bold mt-2">Airbnb Search Ranking</h3>
                        <p class="text-sm text-gray-600">Location-aware, LTR with NDCG optimization...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Search</span>
                        <h3 class="font-bold mt-2">YouTube Video Search</h3>
                        <p class="text-sm text-gray-600">Two-tower, query understanding, BERT...</p>
                    </div>
                    <!-- Pricing -->
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Pricing</span>
                        <h3 class="font-bold mt-2">Airbnb Dynamic Pricing</h3>
                        <p class="text-sm text-gray-600">Wide & Deep, demand estimation, elasticity...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Ads</span>
                        <h3 class="font-bold mt-2">Ads pCTR Prediction</h3>
                        <p class="text-sm text-gray-600">Deep Factorization Machines, calibration...</p>
                    </div>
                    <!-- Trust & Safety -->
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Trust</span>
                        <h3 class="font-bold mt-2">Bot Detection</h3>
                        <p class="text-sm text-gray-600">Behavioral features, GNN, calibrated actions...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Trust</span>
                        <h3 class="font-bold mt-2">Scam Content Detection</h3>
                        <p class="text-sm text-gray-600">Multi-modal, MMOE, focal loss...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Trust</span>
                        <h3 class="font-bold mt-2">Harmful Content Detection</h3>
                        <p class="text-sm text-gray-600">Multi-modal classifier, active learning...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">LinkedIn Feed Ranking</h3>
                        <p class="text-sm text-gray-600">3-stage pipeline, MMOE heads...</p>
                    </div>
                </div>

                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-lg">
                        <i class="fas fa-crown text-5xl text-yellow-500 mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2">Unlock All 22 ML System Design Cases</h3>
                        <p class="text-gray-600 mb-4">Get full step-by-step solutions for interviews at Google, Meta, Airbnb, Pinterest, LinkedIn & more</p>
                        <div class="grid grid-cols-2 gap-2 text-sm text-gray-600 mb-6">
                            <div><i class="fas fa-check text-green-500 mr-1"></i>PYMK (GNN)</div>
                            <div><i class="fas fa-check text-green-500 mr-1"></i>Dynamic Pricing</div>
                            <div><i class="fas fa-check text-green-500 mr-1"></i>Bot Detection</div>
                            <div><i class="fas fa-check text-green-500 mr-1"></i>Feed Ranking</div>
                            <div><i class="fas fa-check text-green-500 mr-1"></i>Search Ranking</div>
                            <div><i class="fas fa-check text-green-500 mr-1"></i>+16 more...</div>
                        </div>
                        <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank"
                           class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-4 rounded-full font-bold hover:shadow-lg transition inline-block text-lg">
                            <i class="fas fa-user-tie mr-2"></i>Book Mentorship to Unlock
                        </a>
                        <p class="text-sm text-gray-500 mt-4">1:1 coaching includes mock interviews + all premium content</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-4">Need help with ML System Design? <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank" class="text-pink-400 hover:underline">Book a mock interview session</a></p>
            <p class="text-gray-500">&copy; 2025 MLInterviewPro</p>
        </div>
    </footer>

    <script>
        function toggleContent(id) {
            const content = document.getElementById(id);
            content.classList.toggle('open');
        }
    </script>
</body>
</html>
