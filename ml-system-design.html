<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML System Design - MLInterviewPro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .case-card:hover { transform: translateY(-3px); }
        .premium-blur { filter: blur(4px); pointer-events: none; }
        .topic-recsys { border-left: 4px solid #10b981; }
        .topic-search { border-left: 4px solid #3b82f6; }
        .topic-content { border-left: 4px solid #ef4444; }
        .topic-ads { border-left: 4px solid #f59e0b; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <a href="index.html" class="text-2xl font-bold text-purple-600">
                    <i class="fas fa-brain mr-2"></i>MLInterviewPro
                </a>
                <div class="hidden md:flex space-x-6">
                    <a href="leetcode.html" class="text-gray-700 hover:text-purple-600 font-medium">LeetCode</a>
                    <a href="ml-system-design.html" class="text-purple-600 font-bold">ML System Design</a>
                    <a href="behavioral.html" class="text-gray-700 hover:text-purple-600 font-medium">Behavioral</a>
                    <a href="cheatsheet.html" class="text-gray-700 hover:text-purple-600 font-medium">Cheatsheet</a>
                </div>
                <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank"
                   class="bg-gradient-to-r from-pink-500 to-purple-600 text-white px-4 py-2 rounded-full font-semibold hover:shadow-lg transition">
                    <i class="fas fa-user-tie mr-2"></i>Book Mentorship
                </a>
            </div>
        </div>
    </nav>

    <!-- Header -->
    <section class="gradient-bg text-white py-12">
        <div class="max-w-7xl mx-auto px-4">
            <h1 class="text-4xl font-bold mb-4"><i class="fas fa-project-diagram mr-3"></i>ML System Design Cases</h1>
            <p class="text-xl opacity-90">22 comprehensive case studies with full solutions and diagrams</p>
            <div class="mt-6 flex flex-wrap gap-4">
                <span class="bg-green-500/30 px-4 py-2 rounded-full">RecSys</span>
                <span class="bg-blue-500/30 px-4 py-2 rounded-full">Search & Ranking</span>
                <span class="bg-red-500/30 px-4 py-2 rounded-full">Content Moderation</span>
                <span class="bg-yellow-500/30 px-4 py-2 rounded-full">Ads</span>
            </div>
        </div>
    </section>

    <!-- Topics Overview -->
    <section class="py-8 bg-white shadow">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="p-4 rounded-lg bg-green-50">
                    <div class="text-2xl font-bold text-green-600">8</div>
                    <div class="text-sm text-gray-600">RecSys Cases</div>
                </div>
                <div class="p-4 rounded-lg bg-blue-50">
                    <div class="text-2xl font-bold text-blue-600">6</div>
                    <div class="text-sm text-gray-600">Search/Ranking</div>
                </div>
                <div class="p-4 rounded-lg bg-red-50">
                    <div class="text-2xl font-bold text-red-600">4</div>
                    <div class="text-sm text-gray-600">Content Mod</div>
                </div>
                <div class="p-4 rounded-lg bg-yellow-50">
                    <div class="text-2xl font-bold text-yellow-600">4</div>
                    <div class="text-sm text-gray-600">Ads/Pricing</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Free Cases Section -->
    <section class="py-12">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-unlock text-green-500 mr-3"></i>Free Case Studies (5 Full Solutions)
            </h2>

            <div class="space-y-6">
                <!-- Case 1: YouTube Video Search -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden case-card transition-all duration-300 topic-search">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">Search</span>
                                <h3 class="text-xl font-bold mt-2">YouTube Video Search</h3>
                                <p class="text-gray-600">Design a video search system that returns relevant videos for text queries</p>
                            </div>
                            <span class="text-sm text-gray-500">YouTube/Google</span>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-question-circle text-purple-500 mr-2"></i>Clarifying Questions</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Catalog size? Text search only? Multi-language?</li>
                                    <li>• Personalized vs query-video match?</li>
                                    <li>• Latency budget? QPS requirements?</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-sitemap text-blue-500 mr-2"></i>High-Level Design</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Two-tower model (query tower + video tower)</li>
                                    <li>• Query understanding + expansion + retrieval + reranking</li>
                                    <li>• 150ms latency budget</li>
                                </ul>
                            </div>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-cogs text-green-500 mr-2"></i>Feature Engineering</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Query: Normalization, tokenization (BPE), DistilBERT embeddings</li>
                                    <li>• Video: Frame extraction, 3D transformers, BERT for transcription</li>
                                    <li>• Video metadata: genre, likes (bucketized), channel features</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-chart-line text-orange-500 mr-2"></i>Evaluation</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Offline: MRR, MAP (click/completion weighted)</li>
                                    <li>• Online: Completion rate, watch time, CTR</li>
                                    <li>• Sliced by country/language</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-brain text-pink-500 mr-2"></i>Key Modeling Insights</h4>
                            <p class="text-sm text-gray-600">
                                Use contrastive loss with in-batch negatives. ANN indexing with SCANN/FAISS for log(n) retrieval.
                                Continual learning with drift detection. Handle cold start with content-based fallback for new videos.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Case 2: LinkedIn Feed Ranking -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden case-card transition-all duration-300 topic-recsys">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">RecSys</span>
                                <h3 class="text-xl font-bold mt-2">LinkedIn Feed Ranking</h3>
                                <p class="text-gray-600">Rank posts, articles, jobs in the homepage feed</p>
                            </div>
                            <span class="text-sm text-gray-500">LinkedIn</span>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-sitemap text-blue-500 mr-2"></i>Architecture</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• 3-stage: Retrieval (40ms) → Heavy Ranker (80ms) → Reranker (30ms)</li>
                                    <li>• Multi-objective: dwell, click, reaction, comment, share, report</li>
                                    <li>• MMOE with DCNv2 crosses</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-database text-purple-500 mr-2"></i>Features</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Member: title/industry embeddings, interests, activity rates</li>
                                    <li>• Content: MiniLM embeddings, topics, freshness, creator quality</li>
                                    <li>• Graph: connection depth, social proof, creator-member affinity</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-brain text-pink-500 mr-2"></i>Key Insights</h4>
                            <p class="text-sm text-gray-600">
                                Sequence encoder (Transformer) over member's recent interactions for short-term intent.
                                Calibration per-region with isotonic regression. Reranker handles freshness boost, diversity caps, and creator fairness.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Case 3: Similar Listings (Airbnb) -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden case-card transition-all duration-300 topic-recsys">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">RecSys</span>
                                <h3 class="text-xl font-bold mt-2">Airbnb Similar Listings</h3>
                                <p class="text-gray-600">Session-based recommendation for similar property suggestions</p>
                            </div>
                            <span class="text-sm text-gray-500">Airbnb</span>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-lightbulb text-yellow-500 mr-2"></i>Core Approach</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Session-based: predict next item from recent clicks</li>
                                    <li>• Word2Vec-style embeddings on listing sequences</li>
                                    <li>• Always include booked listing in training pairs</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-bullseye text-red-500 mr-2"></i>Training Strategy</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Positive pairs: central listing + neighbors in session</li>
                                    <li>• Hard negatives: same city/neighborhood, not clicked</li>
                                    <li>• Blend short-term + long-term user embeddings</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-brain text-pink-500 mr-2"></i>Key Insights</h4>
                            <p class="text-sm text-gray-600">
                                Cold start: use average embeddings of local neighbors. Position bias mitigation via randomization, inverse propensity weighting,
                                or positional features. Metrics: 1/rank of booked item, session book rate.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Case 4: Harmful Content Detection -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden case-card transition-all duration-300 topic-content">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium">Content Moderation</span>
                                <h3 class="text-xl font-bold mt-2">Harmful Content Detection</h3>
                                <p class="text-gray-600">Multi-modal system to detect and remove harmful posts</p>
                            </div>
                            <span class="text-sm text-gray-500">Meta/Social</span>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-layer-group text-indigo-500 mr-2"></i>Architecture</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Late fusion: separate models per modality, combine predictions</li>
                                    <li>• Multi-task learning: violence, nudity, hate speech, misinformation</li>
                                    <li>• Two paths: removal (high prob) vs demotion (review queue)</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-cogs text-green-500 mr-2"></i>Features</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Text: DistilBERT embeddings (multilingual)</li>
                                    <li>• Image/Video: CLIP, SimCLR, VideoMOCO</li>
                                    <li>• Author: violation history, report rate, account age</li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-4 p-4 bg-gray-50 rounded-lg">
                            <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-chart-bar text-orange-500 mr-2"></i>Evaluation</h4>
                            <p class="text-sm text-gray-600">
                                Offline: PR-AUC, ROC-AUC. Online: Prevalence (uncaught/total), harmful impressions (impact), valid appeals (FP rate),
                                proactive rate (ML detected / total detected). Handle human labeler bias with diverse teams and disagreement analysis.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Case 5: Event Recommendation -->
                <div class="bg-white rounded-xl shadow-lg overflow-hidden case-card transition-all duration-300 topic-recsys">
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div>
                                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium">RecSys</span>
                                <h3 class="text-xl font-bold mt-2">Event Recommendation</h3>
                                <p class="text-gray-600">Location-based, time-sensitive event suggestions</p>
                            </div>
                            <span class="text-sm text-gray-500">Eventbrite/Meetup</span>
                        </div>

                        <div class="grid md:grid-cols-2 gap-4 mt-4">
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-map-marker-alt text-red-500 mr-2"></i>Key Features</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Location: walk score, commute distance, same city</li>
                                    <li>• Time: day-of-week ratio, convenience score, time left</li>
                                    <li>• Social: friend attendance, invitation status, host connection</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="font-semibold text-gray-800 mb-2"><i class="fas fa-exclamation-triangle text-yellow-500 mr-2"></i>Challenges</h4>
                                <ul class="text-sm text-gray-600 space-y-1">
                                    <li>• Heavy cold start (events are short-lived)</li>
                                    <li>• Feature-heavy approach over collaborative filtering</li>
                                    <li>• Start with XGBoost, graduate to neural network</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Premium Cases Section -->
    <section class="py-12 bg-gradient-to-br from-purple-50 to-pink-50">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <i class="fas fa-lock text-purple-500 mr-3"></i>Premium Cases (17+ more with full diagrams)
            </h2>

            <div class="relative">
                <div class="grid md:grid-cols-3 gap-4 premium-blur">
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Ads</span>
                        <h3 class="font-bold mt-2">Ads pCTR Prediction</h3>
                        <p class="text-sm text-gray-600">Deep Factorization Machines, calibration...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">YouTube Video Recommendation</h3>
                        <p class="text-sm text-gray-600">Two-stage retrieval + ranking, matrix factorization...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Search</span>
                        <h3 class="font-bold mt-2">Airbnb Search Ranking</h3>
                        <p class="text-sm text-gray-600">Location-aware, LTR with NDCG optimization...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">RecSys</span>
                        <h3 class="font-bold mt-2">LinkedIn Job Recommendation</h3>
                        <p class="text-sm text-gray-600">Skill matching, graph neural networks...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">Pricing</span>
                        <h3 class="font-bold mt-2">Airbnb Dynamic Pricing</h3>
                        <p class="text-sm text-gray-600">Demand forecasting, elasticity modeling...</p>
                    </div>
                    <div class="bg-white rounded-xl shadow p-6">
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">Trust</span>
                        <h3 class="font-bold mt-2">Bot Detection</h3>
                        <p class="text-sm text-gray-600">Behavioral features, graph-based detection...</p>
                    </div>
                </div>

                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-md">
                        <i class="fas fa-crown text-5xl text-yellow-500 mb-4"></i>
                        <h3 class="text-2xl font-bold mb-2">Unlock All 22 Cases</h3>
                        <p class="text-gray-600 mb-4">Full solutions with Excalidraw diagrams</p>
                        <ul class="text-sm text-gray-600 mb-6 space-y-2">
                            <li><i class="fas fa-check text-green-500 mr-2"></i>YouTube Recommendation</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>Airbnb Dynamic Pricing</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>PYMK (People You May Know)</li>
                            <li><i class="fas fa-check text-green-500 mr-2"></i>And 14 more...</li>
                        </ul>
                        <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank"
                           class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-full font-bold hover:shadow-lg transition inline-block">
                            <i class="fas fa-user-tie mr-2"></i>Book Mentorship
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-4">Need help with ML System Design? <a href="https://mentorcruise.com/mentor/AminGhaderi/" target="_blank" class="text-pink-400 hover:underline">Book a mock interview session</a></p>
            <p class="text-gray-500">&copy; 2025 MLInterviewPro</p>
        </div>
    </footer>
</body>
</html>
